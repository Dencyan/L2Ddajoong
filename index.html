<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dajoong Live2D Portfolio</title>

  <!-- Open Graph / Twitter Card -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Dajoong Live2D Portfolio" />
  <meta property="og:description" content="Live2D 리거 다중의 포트폴리오입니다. 다양한 스타일의 리깅과 배경 애니메이션 작업을 확인해보세요." />
  <!-- Primary (wide) -->
  <meta property="og:image" content="https://dajoong.cloud/assets/og-thumbnail.jpg" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="600" />
  <!-- Fallback (square) -->
  <meta property="og:image" content="https://dajoong.cloud/assets/og-thumbnail.jpg" />
  <meta property="og:image:width" content="600" />
  <meta property="og:image:height" content="600" />
  <meta property="og:url" content="https://dajoong.cloud/" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Dajoong Live2D Portfolio" />
  <meta name="twitter:description" content="Live2D 리거 다중의 포트폴리오입니다." />
  <meta name="twitter:image" content="https://dajoong.cloud/assets/og-thumbnail.jpg" />

  <link rel="stylesheet" href="style.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Noto+Sans+KR:wght@300;400;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Header -->
  <header>
    <h1>Dajoong</h1>
    <nav>
      <a href="#about">알아보기</a>
      <a href="#works">작품</a>
      <a href="#contact">문의하기</a>
      <a href="price.html">가격</a>
    </nav>
  </header>

  <!-- Hero -->
  <section class="hero">
    <h2>Live2D Rigger Dajoong</h2>
    <p>Live2D LD · SD · 메모리얼 포트폴리오</p>
  <!-- About -->
  <section id="about" class="about">
    <div class="about-inner">
      <div class="about-text">
        <h2>About</h2>
        <p>
          안녕하세요. Live2D Rigger 다중(Dajoong)입니다.<br>
          LD·SD 버추얼 모델을 비롯해 배경 애니메이션과 월페이퍼 작업을 진행하며, 
          섬세하고 부드러운 모션 구현에 집중하고 있습니다.<br><br>

          모델의 매력을 극대화할 수 있는 리깅 방식을 연구하며, 
          다양한 스타일의 모델 작업에 대응할 수 있습니다.<br>
          또한 클라이언트의 요구에 맞춘 맞춤형 리깅 솔루션을 제공합니다.<br><br>

          여러 작가님들과의 협업 및 상업 제작 경험을 통해 
          의도에 맞는 결과물을 안정적이고 효율적으로 제작합니다.
        </p>
      </div>

      <aside class="about-card" aria-hidden="false">
        <ul>
          <li>
            <strong>전문 분야</strong>
            <div class="about-list">
              <div>·Live2D Rigging</div>
              <div>·Live2D Animation</div>
              <div>·Background Rigging</div>
            </div>
          </li>

          <li>
            <strong>툴</strong>
            <div class="about-list">
              <div>·Live2D Cubism</div>
              <div>·CLIPSTUDIO</div>
              <div>·Photoshop</div>
            </div>
          </li>

          <li>
            <strong>스타일</strong>
            <div class="about-list">
              <div>·자연스럽고 디테일한 리깅</div>
              <div>·다양한 스타일의 모델 작업 대응</div>
            </div>
          </li>
        </ul>
      </aside>
    </div>
  </section>

  <!-- Works -->
  <section id="works" class="works">
    <h2>Portfolio</h2>
    <div data-type-buttons></div>
    <div id="type-container"></div>
<script>
// Wrap slider setup so it runs after DOM is parsed and ensures a consistent init order
document.addEventListener('DOMContentLoaded', () => {
  // ------------------- 데이터 정의 -------------------
  const videoData = {
    LD: { title: "LD", list: ["Zlbfvuxf3Lo", "8EabRx_ZFAI", "wML53bUKn1Q", "yvc0yN8uwqU", "w-eRgLmsgas", "zKRPxZ7pv58"] },
    SD: { title: "SD", list: ["bdD1dhv6lI4", "BtvMd8yG80g", "SwGP1UFE424", "pH4GRAjcp2U", "b6DNOVjED9o"] },
    FAN: { title: "오너캐", list: ["cOmUiWxkqfo", "FzIi9m1bKeI", "9XtIUiv314c"  ] },
    MEM: { title: "메모리얼", list: ["JLTUyPkfsj0", "lhVUjv1q-bw"] }
  };

  // 자동으로 '모두' 탭 생성 (모든 섹션을 순서대로 병합)
  (function addAllTab(){
    const merged = [];
    Object.keys(videoData).forEach(k => {
      if (videoData[k] && Array.isArray(videoData[k].list)) merged.push(...videoData[k].list);
    });
    videoData.ALL = { title: '전체', list: merged };
  })();

  // ------------------- HTML 자동 생성 -------------------
  function buildAllTypes() {
    const typeButtons = document.querySelector("[data-type-buttons]");
    const container = document.getElementById("type-container");

    typeButtons.innerHTML = "";
    container.innerHTML = "";

    let typeKeys = Object.keys(videoData);
    if (videoData.ALL) typeKeys = ['ALL', ...typeKeys.filter(k => k !== 'ALL')];

    typeKeys.forEach((typeKey, idx) => {
      const item = videoData[typeKey];

      const btn = document.createElement("button");
      btn.textContent = item.title;
      btn.setAttribute("data-switch", typeKey);
      if (idx === 0) btn.setAttribute("data-active", "true");
      typeButtons.appendChild(btn);

      const sec = document.createElement("section");
      sec.setAttribute("data-type", typeKey);
      if (idx === 0) sec.setAttribute("data-active", "true");

      sec.innerHTML = generateSliderHTML(item.list);
      container.appendChild(sec);
    });
  }

  // ------------------- 슬라이더 HTML 템플릿 생성 -------------------
  function generateSliderHTML(list) {
    let slides = "";
    list.forEach((vid, i) => {
      slides += `
        <div data-slide data-video="${vid}" data-index="${i}" data-active="${i===0}">
          <div class="video-wrapper">
            <div class="image-placeholder">Loading…</div>
            <iframe class="lazy-iframe" title="Video ${vid}" data-src="https://www.youtube.com/embed/${vid}" src="about:blank" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
          </div>
        </div>`;
    });

    let thumbs = "";
    list.forEach((vid, i) => {
      thumbs += `
        <button data-thumb data-index="${i}" ${i===0 ? 'data-active="true"' : ''}>
          <img src="https://img.youtube.com/vi/${vid}/hqdefault.jpg">
        </button>`;
    });

    return `
      <div data-root>
        <div data-stage aria-roledescription="carousel" data-autoplay="false" data-interval="6000">
          ${slides}
          <button data-action="prev">❮</button>
          <button data-action="next">❯</button>
        </div>

        <div data-dots></div>

        <div data-thumbs-wrapper>
          <div data-thumbs>${thumbs}</div>
        </div>
      </div>`;
  }

  // ------------------- 초기 실행 -------------------
  buildAllTypes();

  // Initialize lazy-loading for iframes and click-to-load behavior
  function initLazyIframes() {
    const wrappers = Array.from(document.querySelectorAll('.video-wrapper'))
      .filter(w => w.querySelector('iframe[data-src]'));

    if (!wrappers.length) return;

    if ('IntersectionObserver' in window) {
      const observer = new IntersectionObserver((entries, obs) => {
        entries.forEach(entry => {
          if (!entry.isIntersecting) return;
          const wrapper = entry.target;
          const iframe = wrapper.querySelector('iframe[data-src]');
          const ph = wrapper.querySelector('.image-placeholder');
          if (iframe && iframe.dataset.src) {
            iframe.src = iframe.dataset.src;
            iframe.addEventListener('load', () => { if (ph) ph.classList.add('hidden'); }, { once: true });
            iframe.removeAttribute('data-src'); iframe.classList.remove('lazy-iframe');
          }
          obs.unobserve(wrapper);
        });
      }, { rootMargin: '300px 0px' });

      wrappers.forEach(w => observer.observe(w));
    }

    // click-to-load fallback
    wrappers.forEach(wrapper => {
      wrapper.addEventListener('click', () => {
        const iframe = wrapper.querySelector('iframe[data-src]');
        const ph = wrapper.querySelector('.image-placeholder');
        if (iframe && iframe.dataset.src) {
          iframe.src = iframe.dataset.src;
          iframe.addEventListener('load', () => { if (ph) ph.classList.add('hidden'); }, { once: true });
          iframe.removeAttribute('data-src'); iframe.classList.remove('lazy-iframe');
        }
      });
    });
  }

  initLazyIframes();

  // 타입 전환 (타입 버튼)
  const typeButtons = document.querySelectorAll('[data-type-buttons] button');
  const typeSections = document.querySelectorAll('section[data-type]');

  typeButtons.forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const target = btn.getAttribute('data-switch');

      typeButtons.forEach(b=>b.removeAttribute('data-active'));
      btn.setAttribute('data-active','true');

      typeSections.forEach(sec=>{
        if(sec.getAttribute('data-type') === target)
          sec.setAttribute('data-active','true');
        else
          sec.removeAttribute('data-active');
      });

      // ★ 타입 전환 후 즉시 각 root의 사이즈 재계산 (CSS 기반 비율 사용)
      setTimeout(() => { window.dispatchEvent(new Event('resize')); }, 10);
    });
  });

  // Slider core
  (function(){
    const roots = document.querySelectorAll('div[data-root]');

    roots.forEach(root => {
      const stage = root.querySelector('div[data-stage]');
      const slides = Array.from(stage.querySelectorAll('div[data-slide]'));
      const prevBtn = stage.querySelector('button[data-action="prev"]');
      const nextBtn = stage.querySelector('button[data-action="next"]');
      const dotsWrap = root.querySelector('div[data-dots]');
      const thumbs = root.querySelector('div[data-thumbs]');
      const thumbButtons = Array.from(thumbs.querySelectorAll('button[data-thumb]'));
      const progressBar = root.querySelector('div[data-bar]');

      let current = slides.find(s => s.getAttribute('data-active') === 'true')
        ?.getAttribute('data-index') || 0;
      current = Number(current);
      const total = slides.length;

      let autoplay = stage.getAttribute('data-autoplay') === 'true';
      let interval = parseInt(stage.getAttribute('data-interval') || '5000', 10);
      let timer = null;

      function buildDots(){
        dotsWrap.innerHTML = '';
        for(let i=0;i<total;i++){
          const b = document.createElement('button');
          b.setAttribute('data-dot','');
          if(i===current) b.setAttribute('data-active','true');
          b.addEventListener('click', ()=> goTo(i));
          dotsWrap.appendChild(b);
        }
      }

      function updateUI(){
        slides.forEach(s=>{
          const idx = Number(s.getAttribute('data-index'));
          const active = idx===current;
          s.setAttribute('data-active', active?'true':'false');
          s.setAttribute('aria-hidden', active?'false':'true');
        });

        const dotBtns = dotsWrap.querySelectorAll('button[data-dot]');
        dotBtns.forEach((d,i)=>{
          if(i===current) d.setAttribute('data-active','true');
          else d.removeAttribute('data-active');
        });

        thumbButtons.forEach((t,i)=>{
          if(i===current) t.setAttribute('data-active','true');
          else t.removeAttribute('data-active');
        });

        if (progressBar) progressBar.style.width = ((current+1)/total*100)+'%';
      }

      function goTo(i){
        if(i<0) i=total-1;
        if(i>=total) i=0;
        current=i; updateUI(); resetAutoplay();
      }

      function prev(){ goTo(current-1); }
      function next(){ goTo(current+1); }

      thumbButtons.forEach(btn=> btn.addEventListener('click', ()=>{ const idx = Number(btn.getAttribute('data-index')); goTo(idx); }));

      prevBtn.addEventListener('click', prev);
      nextBtn.addEventListener('click', next);

      window.addEventListener('keydown', e=>{ if(e.key==='ArrowLeft') prev(); if(e.key==='ArrowRight') next(); });

      function startAutoplay(){ if(!autoplay) return; stopAutoplay(); timer=setInterval(()=>next(), interval); }
      function stopAutoplay(){ if(timer){ clearInterval(timer); timer=null; } }
      function resetAutoplay(){ stopAutoplay(); startAutoplay(); }

      function resizeThumbs() {
        const thumbs = document.querySelectorAll('[data-thumbs] > button[data-thumb]');
        if (!thumbs.length) return;
        const width = window.innerWidth * 0.3;
        const height = width * (9 / 16);
        thumbs.forEach(btn => { btn.style.width = width + 'px'; btn.style.height = height + 'px'; });
      }

      function resizeStage() { const stage = root.querySelector('div[data-stage]'); if (!stage) return; stage.style.height = ''; }
      function resizeIframe() { const iframes = root.querySelectorAll('[data-slide] iframe'); if (!iframes.length) return; iframes.forEach(iframe => { iframe.style.width = '100%'; iframe.style.height = '100%'; }); }

      function handleResize() { resizeThumbs(); resizeStage(); resizeIframe(); }
      let _resizeTimer = null; function scheduleResize() { if (_resizeTimer) clearTimeout(_resizeTimer); _resizeTimer = setTimeout(handleResize, 80); }

      handleResize(); window.addEventListener('resize', scheduleResize);

      buildDots(); updateUI(); startAutoplay();
    });
  })();

});
</script>
<script>
(function() {
  let hasSentHeight = false;

  function sendHeightOnce() {
    if (hasSentHeight) return;

    const height = document.body.scrollHeight; // 로딩 무시, 바로 계산

    parent.postMessage(
      { type: "sliderHeight", value: height },
      "*"
    );

    hasSentHeight = true;
  }

  // DOMContentLoaded 시점에 바로 실행
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", sendHeightOnce);
  } else {
    sendHeightOnce();
  }
})();
</script>

    <div class="more-btn">
      <a href="https://www.youtube.com/@Dajoong_L2d" target="_blank" rel="noopener noreferrer">더 많은 작업 보기 →</a>
    <a href="https://dajoong.cloud/price.html" target="_blank" rel="noopener noreferrer">가격 확인하기 →</a>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="contact">
    <h2>Contact-us</h2>
    <div class="contact-links">
      <a href="https://x.com/_Dajoong" target="_blank" rel="noopener noreferrer" class="contact-btn">X (Twitter)</a>
      <a href="https://www.foriio.com/DaJoong" target="_blank" rel="noopener noreferrer" class="contact-btn">Foriio</a>
      <a href="https://www.youtube.com/@Dajoong_L2d" target="_blank" rel="noopener noreferrer" class="contact-btn">YouTube</a>
      <a href="https://artmug.kr/index.php?channel=list&field=brand&search=cW1qMTc3MA==" target="_blank" rel="noopener noreferrer" class="contact-btn">ArtMug</a>
    </div>
  </section>

  <footer>
    <p>copyright(c)2025 All rights reserved by Dajoong</p>
  </footer>
</body>
</html>